<div class="promptle-container">
  <h1 style="text-align: center;">
    Promptle <br><br> {{ topic }}
  </h1>

  <!-- Loading / errors -->
  <div *ngIf="gameLoading">Loading game data...</div>
  <div *ngIf="gameError" class="error">{{ gameError }}</div>

  <!-- Backend preview (single correct answer row) -->
  <div *ngIf="!gameLoading && !gameError && correctAnswer && correctAnswer.values.length" hidden>
    <h2 style="text-align:center;">Current Answer (from backend)</h2>

    <div class="game-grid single-row">
      <div class="column" *ngFor="let header of headers; let i = index">
        <div class="header">{{ header }}</div>

        <div class="guess-cell backend-cell">
          {{ correctAnswer.values[i] }}
        </div>
      </div>
    </div>
  </div>
<!-- COLE GILLIAM -->
  <!-- Guess Input -->
<div class="guess-input" *ngIf="answers.length">
  <mat-form-field appearance="fill" class="guess-select-field">
    <mat-label>Select a Guess</mat-label>
    <mat-select [(ngModel)]="selectedGuess">
      <mat-option *ngFor="let answer of answers" [value]="answer.name">
        {{ answer.name }}
      </mat-option>
    </mat-select>
  </mat-form-field>


  <button
    matButton="filled"
    [disabled]="!selectedGuess"
    (click)="onSubmitGuess()"
  >
    SUBMIT
  </button>
</div>
 <!-- COLE GILLIAM -->
  <!-- Game Grid -->
  <div class="game-grid" *ngIf="headers.length">
    <div class="column" *ngFor="let header of headers; let i = index">
      <div class="header">{{ header }}</div>

      <div
        class="guess-cell"
        *ngFor="let guess of submittedGuesses"
        [style.background-color]="guess.colors[i]"
      >
        {{ guess.values[i] }}
      </div>
    </div>
  </div>
<!-- 
  <div class="settings-container">
    <button class="settings-button" (click)="toggleSettingsMenu()">
      ⚙️
    </button>

    <div class="settings-menu" *ngIf="showSettingsMenu">
      <button class="settings-item" (click)="quitGame()">Quit Game</button>
    </div>
  </div>

</div>
-->

<!-- COLE GILLIAM/JORGE CERVACIO IZQUIERDO(refactored using Angular Materials) -->
<div class="settings-container">
    <button
      mat-icon-button
      class="settings-button"
      [matMenuTriggerFor]="settingsMenu"
      aria-label="Game settings"
    >
      <mat-icon>settings</mat-icon>
    </button>

    <mat-menu #settingsMenu="matMenu">
      <button mat-menu-item (click)="quitGame()">
        <mat-icon>exit_to_app</mat-icon>
        <span>Quit Game</span>
      </button>

    
    </mat-menu>
  </div>
</div>

