<div class="promptle-container">
  <h1>{{ topic }} Promptle</h1>

  <div *ngIf="gameLoading">Loading game data...</div>
  <div *ngIf="gameError" class="error">{{ gameError }}</div>

  <!-- Backend preview using the same grid-style layout -->
  <div class="demo-grid" *ngIf="!gameLoading && !gameError && backendHeaders.length">
    <h2>Current Answer (from backend)</h2>

    <div class="game-grid single-row">
      <div class="column" *ngFor="let header of backendHeaders; let i = index">
        <div class="header">{{ header }}</div>
        <div class="guess-cell backend-cell">
          {{ backendRow[i] }}
        </div>
      </div>
    </div>
  </div>

  <!-- Dropdown Input -->
  <div class="guess-input">
    <select [(ngModel)]="selectedGuess">
      <option value="">-- Select a Guess --</option>
      <option *ngFor="let answer of answers" [value]="answer.name">
        {{ answer.name }}
      </option>
    </select>
    <button (click)="onSubmitGuess()" [disabled]="!selectedGuess">
      Submit Guess
    </button>
  </div>

  <!-- Game Grid -->
  <div class="game-grid">
    <div class="column" *ngFor="let header of headers; let i = index">
      <div class="header">{{ header }}</div>
      <div
        class="guess-cell"
        *ngFor="let guess of submittedGuesses"
        [ngStyle]="{ 'background-color': guess.colors[i] }"
      >
        {{ guess.values[i] }}
      </div>
    </div>
  </div>
</div>
